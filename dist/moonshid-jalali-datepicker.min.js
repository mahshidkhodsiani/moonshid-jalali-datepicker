!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JalaliDatePicker=e():t.JalaliDatePicker=e()}(this,()=>(()=>{const t=["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],e=["ش","ی","د","س","چ","پ","ج"],n=(t,e)=>Math.floor(t/e);function a(t,e,a){const i=[31,28,31,30,31,30,31,31,30,31,30,31];let s=t-1600,o=e-1,r=a-1,c=365*s+n(s+3,4)-n(s+99,100)+n(s+399,400);for(let t=0;t<o;++t)c+=i[t];c+=r;let l=c-79,d=n(l,12053);l%=12053;let h=979+33*d+4*n(l,1461);l%=1461,l>=366&&(h+=n(l-1,365),l=(l-1)%365);const p=[31,31,31,31,31,31,30,30,30,30,30,29];let u=0;for(let t=0;t<12;t++){if(l<p[t]){u=t+1;break}l-=p[t]}return[h,u,l+1]}class i{constructor(t){this.input=document.getElementById(t),this.input?(this.currentDate=new Date,this.jalaliDate=a(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,this.currentDate.getDate()),this.container=null,this.init()):console.error("Input element not found.")}init(){this.input.addEventListener("focus",()=>this.show()),document.addEventListener("click",t=>{this.container&&!this.container.contains(t.target)&&t.target!==this.input&&this.hide()})}show(){this.container||(this.createContainer(),document.body.appendChild(this.container)),this.updateCalendar(),this.container.style.display="block",this.positionContainer()}hide(){this.container&&(this.container.style.display="none")}createContainer(){this.container=document.createElement("div"),this.container.className="datepicker-container",this.container.innerHTML=`\n      <div class="datepicker-header">\n        <button class="prev-month">&lt;</button>\n        <span class="month-year"></span>\n        <button class="next-month">&gt;</button>\n      </div>\n      <table class="datepicker-table">\n        <thead>\n          <tr>${e.map(t=>`<th>${t}</th>`).join("")}</tr>\n        </thead>\n        <tbody></tbody>\n      </table>\n    `,this.container.querySelector(".prev-month").addEventListener("click",()=>this.changeMonth(-1)),this.container.querySelector(".next-month").addEventListener("click",()=>this.changeMonth(1)),this.container.addEventListener("click",t=>{"TD"!==t.target.tagName||t.target.classList.contains("disabled")||this.selectDate(t.target)})}updateCalendar(){const[e,n]=this.jalaliDate;this.container.querySelector(".month-year").textContent=`${t[n-1]} ${e}`;const i=this.container.querySelector("tbody");i.innerHTML="";const s=this.getJalaliDaysInMonth(e,n),o=function(t,e){const n=t+621,i=new Date(n-1,0,1),s=new Date(n+1,11,31);for(let n=new Date(i);n<=s;n.setDate(n.getDate()+1)){const[i,s,o]=a(n.getFullYear(),n.getMonth()+1,n.getDate());if(i===t&&s===e&&1===o)return(n.getDay()+1)%7}return 0}(e,n);let r=document.createElement("tr");for(let t=0;t<o;t++)r.innerHTML+='<td class="disabled"></td>';const[c,l,d]=a((new Date).getFullYear(),(new Date).getMonth()+1,(new Date).getDate());for(let t=1;t<=s;t++){const a=document.createElement("td");a.textContent=t,a.dataset.day=t,a.dataset.month=n,a.dataset.year=e,6==(o+t-1)%7&&a.classList.add("friday"),c===e&&l===n&&d===t&&(a.classList.add("today"),this.input.value||(this.input.value=`${c}/${String(l).padStart(2,"0")}/${String(d).padStart(2,"0")}`)),(o+t-1)%7==0&&1!==t&&(i.appendChild(r),r=document.createElement("tr")),r.appendChild(a)}if(i.appendChild(r),this.input.value){const t=this.input.value.split("/").map(t=>parseInt(t,10));if(3===t.length){const[e,n,a]=t;this.container.querySelectorAll(".datepicker-table td").forEach(t=>{parseInt(t.dataset.year,10)===e&&parseInt(t.dataset.month,10)===n&&parseInt(t.dataset.day,10)===a?t.classList.add("selected"):t.classList.remove("selected")})}}}getJalaliDaysInMonth(t,e){return e<=6?31:e<=11||t%33%4==1?30:29}changeMonth(t){let[e,n]=this.jalaliDate;n+=t,n<1?(n=12,e--):n>12&&(n=1,e++),this.jalaliDate=[e,n,1],this.updateCalendar()}selectDate(t){const e=parseInt(t.dataset.year,10),n=parseInt(t.dataset.month,10),a=parseInt(t.dataset.day,10);this.input.value=`${e}/${String(n).padStart(2,"0")}/${String(a).padStart(2,"0")}`,this.hide()}positionContainer(){const t=this.input.getBoundingClientRect();this.container.style.top=`${t.bottom+window.scrollY}px`,this.container.style.left=`${t.left+window.scrollX}px`}}return document.addEventListener("DOMContentLoaded",()=>{new i("jalaliDatePicker")}),{}})());